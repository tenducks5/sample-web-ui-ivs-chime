{"ast":null,"code":"\"use strict\"; // Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar DragType_1 = require(\"../dragobserver/DragType\");\n\nvar PresentationBoxType_1 = require(\"./PresentationBoxType\");\n\nvar CSS_OVERFLOW_HIDDEN = 'hidden';\nvar CSS_POSITION_ABSOLUTE = 'absolute';\nvar CSS_POSITION_RELATIVE = 'relative';\n\nvar DefaultPresentation =\n/** @class */\nfunction () {\n  function DefaultPresentation() {}\n\n  DefaultPresentation.prototype.present = function (source, viewport, content, policy, zoomEvent, dragEvent) {\n    var viewportAspectRatio = viewport.getDimensions()[0] / viewport.getDimensions()[1];\n    var sourceAspectRatio = source.getDimensions()[0] / source.getDimensions()[1];\n    var contentPlacement = {\n      dimensions: content.getDimensions(),\n      translations: content.getTranslations()\n    };\n    var state = {\n      contentPlacement: contentPlacement,\n      sourceDimensions: source.getDimensions(),\n      sourceAspectRatio: sourceAspectRatio,\n      viewportDimensions: viewport.getDimensions(),\n      viewportAspectRatio: viewportAspectRatio,\n      scale: content.getDimensions()[0] / source.getDimensions()[0],\n      boxType: DefaultPresentation.boxType(sourceAspectRatio, viewportAspectRatio),\n      focus: {\n        normalizedContentFocus: DefaultPresentation.contentFocus(contentPlacement, dragEvent),\n        normalizedViewportFocus: DefaultPresentation.viewportFocus(viewport.getDimensions(), dragEvent)\n      }\n    };\n    var newPlacement = policy.calculate(state, {\n      zoom: zoomEvent,\n      drag: dragEvent\n    });\n    viewport.setPosition(CSS_POSITION_RELATIVE);\n    viewport.setOverflow(CSS_OVERFLOW_HIDDEN);\n    content.setPosition(CSS_POSITION_ABSOLUTE);\n    content.setDimensions(newPlacement.dimensions);\n    content.setTranslations(newPlacement.translations);\n  };\n\n  DefaultPresentation.cssPixels = function (value) {\n    return value + \"px\";\n  };\n\n  DefaultPresentation.boxType = function (sourceAspectRatio, viewportAspectRatio) {\n    if (sourceAspectRatio > viewportAspectRatio) {\n      return PresentationBoxType_1.default.LETTER_BOX;\n    }\n\n    if (sourceAspectRatio < viewportAspectRatio) {\n      return PresentationBoxType_1.default.PILLAR_BOX;\n    }\n\n    return PresentationBoxType_1.default.NONE;\n  };\n\n  DefaultPresentation.contentFocus = function (contentPlacement, dragEvent) {\n    if (!dragEvent || dragEvent.type === DragType_1.default.END) {\n      return [0.5, 0.5];\n    }\n\n    if (dragEvent.type === DragType_1.default.BEGIN) {\n      return [(dragEvent.coords[0] - contentPlacement.translations[0]) / contentPlacement.dimensions[0], (dragEvent.coords[1] - contentPlacement.translations[1]) / contentPlacement.dimensions[1]];\n    }\n\n    return [(dragEvent.last.coords[0] - contentPlacement.translations[0]) / contentPlacement.dimensions[0], (dragEvent.last.coords[1] - contentPlacement.translations[1]) / contentPlacement.dimensions[1]];\n  };\n\n  DefaultPresentation.viewportFocus = function (viewportDims, dragEvent) {\n    if (!dragEvent || dragEvent.type === DragType_1.default.END) {\n      return [0.5, 0.5];\n    }\n\n    return [dragEvent.coords[0] / viewportDims[0], dragEvent.coords[1] / viewportDims[1]];\n  };\n\n  return DefaultPresentation;\n}();\n\nexports.default = DefaultPresentation;","map":{"version":3,"sources":["../../src/presentation/DefaultPresentation.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\n// Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DragType_1 = require(\"../dragobserver/DragType\");\nvar PresentationBoxType_1 = require(\"./PresentationBoxType\");\nvar CSS_OVERFLOW_HIDDEN = 'hidden';\nvar CSS_POSITION_ABSOLUTE = 'absolute';\nvar CSS_POSITION_RELATIVE = 'relative';\nvar DefaultPresentation = /** @class */ (function () {\n    function DefaultPresentation() {\n    }\n    DefaultPresentation.prototype.present = function (source, viewport, content, policy, zoomEvent, dragEvent) {\n        var viewportAspectRatio = viewport.getDimensions()[0] / viewport.getDimensions()[1];\n        var sourceAspectRatio = source.getDimensions()[0] / source.getDimensions()[1];\n        var contentPlacement = {\n            dimensions: content.getDimensions(),\n            translations: content.getTranslations(),\n        };\n        var state = {\n            contentPlacement: contentPlacement,\n            sourceDimensions: source.getDimensions(),\n            sourceAspectRatio: sourceAspectRatio,\n            viewportDimensions: viewport.getDimensions(),\n            viewportAspectRatio: viewportAspectRatio,\n            scale: content.getDimensions()[0] / source.getDimensions()[0],\n            boxType: DefaultPresentation.boxType(sourceAspectRatio, viewportAspectRatio),\n            focus: {\n                normalizedContentFocus: DefaultPresentation.contentFocus(contentPlacement, dragEvent),\n                normalizedViewportFocus: DefaultPresentation.viewportFocus(viewport.getDimensions(), dragEvent),\n            },\n        };\n        var newPlacement = policy.calculate(state, {\n            zoom: zoomEvent,\n            drag: dragEvent,\n        });\n        viewport.setPosition(CSS_POSITION_RELATIVE);\n        viewport.setOverflow(CSS_OVERFLOW_HIDDEN);\n        content.setPosition(CSS_POSITION_ABSOLUTE);\n        content.setDimensions(newPlacement.dimensions);\n        content.setTranslations(newPlacement.translations);\n    };\n    DefaultPresentation.cssPixels = function (value) {\n        return value + \"px\";\n    };\n    DefaultPresentation.boxType = function (sourceAspectRatio, viewportAspectRatio) {\n        if (sourceAspectRatio > viewportAspectRatio) {\n            return PresentationBoxType_1.default.LETTER_BOX;\n        }\n        if (sourceAspectRatio < viewportAspectRatio) {\n            return PresentationBoxType_1.default.PILLAR_BOX;\n        }\n        return PresentationBoxType_1.default.NONE;\n    };\n    DefaultPresentation.contentFocus = function (contentPlacement, dragEvent) {\n        if (!dragEvent || dragEvent.type === DragType_1.default.END) {\n            return [0.5, 0.5];\n        }\n        if (dragEvent.type === DragType_1.default.BEGIN) {\n            return [\n                (dragEvent.coords[0] - contentPlacement.translations[0]) / contentPlacement.dimensions[0],\n                (dragEvent.coords[1] - contentPlacement.translations[1]) / contentPlacement.dimensions[1],\n            ];\n        }\n        return [\n            (dragEvent.last.coords[0] - contentPlacement.translations[0]) /\n                contentPlacement.dimensions[0],\n            (dragEvent.last.coords[1] - contentPlacement.translations[1]) /\n                contentPlacement.dimensions[1],\n        ];\n    };\n    DefaultPresentation.viewportFocus = function (viewportDims, dragEvent) {\n        if (!dragEvent || dragEvent.type === DragType_1.default.END) {\n            return [0.5, 0.5];\n        }\n        return [dragEvent.coords[0] / viewportDims[0], dragEvent.coords[1] / viewportDims[1]];\n    };\n    return DefaultPresentation;\n}());\nexports.default = DefaultPresentation;\n//# sourceMappingURL=DefaultPresentation.js.map"]},"metadata":{},"sourceType":"script"}