{"ast":null,"code":"var _jsxFileName = \"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/src/components/chimeWeb/Welcome.jsx\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport * as config from '../../config';\nimport Error from './Error';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Welcome extends Component {\n  constructor() {\n    super();\n    this.state = {\n      role: 'host',\n      username: '',\n      title: '',\n      playbackURL: config.DEFAULT_VIDEO_STREAM,\n      errorMsg: '',\n      showError: false\n    };\n\n    this.handleNameChange = e => {\n      this.setState({\n        username: e.target.value\n      });\n    };\n\n    this.handleRoomChange = e => {\n      this.setState({\n        title: e.target.value\n      });\n    };\n\n    this.handlePlaybackURLChange = e => {\n      this.setState({\n        playbackURL: e.target.value\n      });\n    };\n\n    this.handleCreateRoom = e => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.createRoom();\n    };\n\n    this.setErrorMsg = errorMsg => {\n      this.setState({\n        errorMsg,\n        showError: true\n      });\n    };\n\n    this.closeError = () => {\n      this.setState({\n        showError: false\n      });\n    };\n\n    this.baseHref = config.BASE_HREF;\n    this.inputRef = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidMount() {\n    const qs = new URLSearchParams(this.props.location.search);\n    const action = qs.get('action');\n\n    if (action === 'join') {\n      const title = qs.get('room');\n      this.props.history.push(`${this.baseHref}/join?room=${title}`);\n    }\n\n    this.inputRef.current.focus();\n  }\n\n  async createRoom() {\n    const {\n      title,\n      username,\n      playbackURL\n    } = this.state;\n    const data = {\n      username,\n      title,\n      playbackURL,\n      role: this.state.role\n    };\n    sessionStorage.setItem(`chime[${title}]`, JSON.stringify(data));\n    this.props.history.push(`${this.baseHref}/meeting?room=${title}`);\n  }\n\n  render() {\n    const {\n      username,\n      title,\n      playbackURL\n    } = this.state;\n    const createRoomDisabled = !username || !title || !playbackURL;\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"welcome form-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"welcome__intro\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"intro__inner formatted-text\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"Amazon IVS with ChimeSDK\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Create or join rooms, and watch Amazon IVS streams with anyone.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"welcome__content pd-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"content__inner\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"mg-b-2\",\n              children: \"Get started\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              action: \"\",\n              children: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n                className: \"mg-b-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"mg-b-2\",\n                  type: \"text\",\n                  placeholder: \"Your name\",\n                  value: username,\n                  ref: this.inputRef,\n                  onChange: this.handleNameChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Room name\",\n                  value: title,\n                  onChange: this.handleRoomChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Playback URL\",\n                  value: playbackURL,\n                  onChange: this.handlePlaybackURLChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"mg-t-2 btn btn--primary\",\n                  disabled: createRoomDisabled,\n                  onClick: this.handleCreateRoom,\n                  children: \"Create room\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), this.state.showError && /*#__PURE__*/_jsxDEV(Error, {\n        closeError: this.closeError,\n        errorMsg: this.state.errorMsg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(Welcome);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/src/components/chimeWeb/Welcome.jsx"],"names":["React","Component","withRouter","config","Error","Welcome","constructor","state","role","username","title","playbackURL","DEFAULT_VIDEO_STREAM","errorMsg","showError","handleNameChange","e","setState","target","value","handleRoomChange","handlePlaybackURLChange","handleCreateRoom","preventDefault","stopPropagation","createRoom","setErrorMsg","closeError","baseHref","BASE_HREF","inputRef","createRef","componentDidMount","qs","URLSearchParams","props","location","search","action","get","history","push","current","focus","data","sessionStorage","setItem","JSON","stringify","render","createRoomDisabled"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAO,KAAKC,MAAZ,MAAwB,cAAxB;AACA,OAAOC,KAAP,MAAkB,SAAlB;;;AAEA,MAAMC,OAAN,SAAsBJ,SAAtB,CAAgC;AAW9BK,EAAAA,WAAW,GAAG;AACZ;AADY,SATdC,KASc,GATN;AACNC,MAAAA,IAAI,EAAE,MADA;AAENC,MAAAA,QAAQ,EAAE,EAFJ;AAGNC,MAAAA,KAAK,EAAE,EAHD;AAINC,MAAAA,WAAW,EAAER,MAAM,CAACS,oBAJd;AAKNC,MAAAA,QAAQ,EAAE,EALJ;AAMNC,MAAAA,SAAS,EAAE;AANL,KASM;;AAAA,SAgBdC,gBAhBc,GAgBKC,CAAC,IAAI;AACtB,WAAKC,QAAL,CAAc;AAAER,QAAAA,QAAQ,EAAEO,CAAC,CAACE,MAAF,CAASC;AAArB,OAAd;AACD,KAlBa;;AAAA,SAoBdC,gBApBc,GAoBKJ,CAAC,IAAI;AACtB,WAAKC,QAAL,CAAc;AAAEP,QAAAA,KAAK,EAAEM,CAAC,CAACE,MAAF,CAASC;AAAlB,OAAd;AACD,KAtBa;;AAAA,SAwBdE,uBAxBc,GAwBYL,CAAC,IAAI;AAC7B,WAAKC,QAAL,CAAc;AAAEN,QAAAA,WAAW,EAAEK,CAAC,CAACE,MAAF,CAASC;AAAxB,OAAd;AACD,KA1Ba;;AAAA,SA4BdG,gBA5Bc,GA4BMN,CAAD,IAAO;AACxBA,MAAAA,CAAC,CAACO,cAAF;AACAP,MAAAA,CAAC,CAACQ,eAAF;AAEA,WAAKC,UAAL;AACD,KAjCa;;AAAA,SAmCdC,WAnCc,GAmCAb,QAAQ,IAAI;AACxB,WAAKI,QAAL,CAAc;AAAEJ,QAAAA,QAAF;AAAYC,QAAAA,SAAS,EAAE;AAAvB,OAAd;AACD,KArCa;;AAAA,SAuCda,UAvCc,GAuCD,MAAM;AACjB,WAAKV,QAAL,CAAc;AAAEH,QAAAA,SAAS,EAAE;AAAb,OAAd;AACD,KAzCa;;AAEZ,SAAKc,QAAL,GAAgBzB,MAAM,CAAC0B,SAAvB;AACA,SAAKC,QAAL,gBAAgB9B,KAAK,CAAC+B,SAAN,EAAhB;AACD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,UAAMC,EAAE,GAAG,IAAIC,eAAJ,CAAoB,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,MAAxC,CAAX;AACA,UAAMC,MAAM,GAAGL,EAAE,CAACM,GAAH,CAAO,QAAP,CAAf;;AACA,QAAID,MAAM,KAAK,MAAf,EAAuB;AACrB,YAAM5B,KAAK,GAAGuB,EAAE,CAACM,GAAH,CAAO,MAAP,CAAd;AACA,WAAKJ,KAAL,CAAWK,OAAX,CAAmBC,IAAnB,CAAyB,GAAE,KAAKb,QAAS,cAAalB,KAAM,EAA5D;AACD;;AACD,SAAKoB,QAAL,CAAcY,OAAd,CAAsBC,KAAtB;AACD;;AA6Be,QAAVlB,UAAU,GAAG;AACjB,UAAM;AAAEf,MAAAA,KAAF;AAASD,MAAAA,QAAT;AAAmBE,MAAAA;AAAnB,QAAmC,KAAKJ,KAA9C;AACA,UAAMqC,IAAI,GAAG;AACXnC,MAAAA,QADW;AAEXC,MAAAA,KAFW;AAGXC,MAAAA,WAHW;AAIXH,MAAAA,IAAI,EAAE,KAAKD,KAAL,CAAWC;AAJN,KAAb;AAMAqC,IAAAA,cAAc,CAACC,OAAf,CAAwB,SAAQpC,KAAM,GAAtC,EAA0CqC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAA1C;AACA,SAAKT,KAAL,CAAWK,OAAX,CAAmBC,IAAnB,CAAyB,GAAE,KAAKb,QAAS,iBAAgBlB,KAAM,EAA/D;AACD;;AAEDuC,EAAAA,MAAM,GAAG;AACP,UAAM;AAAExC,MAAAA,QAAF;AAAYC,MAAAA,KAAZ;AAAmBC,MAAAA;AAAnB,QAAmC,KAAKJ,KAA9C;AACA,UAAM2C,kBAAkB,GAAG,CAACzC,QAAD,IAAa,CAACC,KAAd,IAAuB,CAACC,WAAnD;AACA,wBACE,QAAC,KAAD,CAAO,QAAP;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA,gCAEE;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,6BAAf;AAAA,oCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAFF,eASE;AAAK,UAAA,SAAS,EAAC,uBAAf;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,gBAAf;AAAA,oCACE;AAAI,cAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAM,cAAA,MAAM,EAAC,EAAb;AAAA,qCACE;AAAU,gBAAA,SAAS,EAAC,QAApB;AAAA,wCACE;AAAO,kBAAA,SAAS,EAAC,QAAjB;AAA0B,kBAAA,IAAI,EAAC,MAA/B;AAAsC,kBAAA,WAAW,EAAC,WAAlD;AAA8D,kBAAA,KAAK,EAAEF,QAArE;AAA+E,kBAAA,GAAG,EAAE,KAAKqB,QAAzF;AAAmG,kBAAA,QAAQ,EAAE,KAAKf;AAAlH;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAO,kBAAA,IAAI,EAAC,MAAZ;AAAmB,kBAAA,WAAW,EAAC,WAA/B;AAA2C,kBAAA,KAAK,EAAEL,KAAlD;AAAyD,kBAAA,QAAQ,EAAE,KAAKU;AAAxE;AAAA;AAAA;AAAA;AAAA,wBAFF,eAGE;AAAO,kBAAA,IAAI,EAAC,MAAZ;AAAmB,kBAAA,WAAW,EAAC,cAA/B;AAA8C,kBAAA,KAAK,EAAET,WAArD;AAAkE,kBAAA,QAAQ,EAAE,KAAKU;AAAjF;AAAA;AAAA;AAAA;AAAA,wBAHF,eAIE;AAAQ,kBAAA,SAAS,EAAC,yBAAlB;AAA4C,kBAAA,QAAQ,EAAE6B,kBAAtD;AAA0E,kBAAA,OAAO,EAAE,KAAK5B,gBAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBATF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAyBG,KAAKf,KAAL,CAAWO,SAAX,iBACC,QAAC,KAAD;AACE,QAAA,UAAU,EAAE,KAAKa,UADnB;AAEE,QAAA,QAAQ,EAAE,KAAKpB,KAAL,CAAWM;AAFvB;AAAA;AAAA;AAAA;AAAA,cA1BJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAkCD;;AAvG6B;;AA0GhC,oBAAeX,UAAU,CAACG,OAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport * as config from '../../config';\nimport Error from './Error';\n\nclass Welcome extends Component {\n\n  state = {\n    role: 'host',\n    username: '',\n    title: '',\n    playbackURL: config.DEFAULT_VIDEO_STREAM,\n    errorMsg: '',\n    showError: false\n  }\n\n  constructor() {\n    super ();\n    this.baseHref = config.BASE_HREF;\n    this.inputRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const qs = new URLSearchParams(this.props.location.search);\n    const action = qs.get('action');\n    if (action === 'join') {\n      const title = qs.get('room');\n      this.props.history.push(`${this.baseHref}/join?room=${title}`);\n    }\n    this.inputRef.current.focus();\n  }\n\n  handleNameChange = e => {\n    this.setState({ username: e.target.value })\n  }\n\n  handleRoomChange = e => {\n    this.setState({ title: e.target.value })\n  }\n\n  handlePlaybackURLChange = e => {\n    this.setState({ playbackURL: e.target.value })\n  }\n\n  handleCreateRoom = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.createRoom();\n  }\n\n  setErrorMsg = errorMsg => {\n    this.setState({ errorMsg, showError: true });\n  }\n\n  closeError = () => {\n    this.setState({ showError: false });\n  }\n\n  async createRoom() {\n    const { title, username, playbackURL } = this.state;\n    const data = {\n      username,\n      title,\n      playbackURL,\n      role: this.state.role\n    }\n    sessionStorage.setItem(`chime[${title}]`, JSON.stringify(data));\n    this.props.history.push(`${this.baseHref}/meeting?room=${title}`);\n  }\n\n  render() {\n    const { username, title, playbackURL } = this.state;\n    const createRoomDisabled = !username || !title || !playbackURL;\n    return (\n      <React.Fragment>\n        <div className=\"welcome form-grid\">\n\n          <div className=\"welcome__intro\">\n            <div className=\"intro__inner formatted-text\">\n              <h1>Amazon IVS with ChimeSDK</h1>\n              <h3>Create or join rooms, and watch Amazon IVS streams with anyone.</h3>\n            </div>\n          </div>\n\n          <div className=\"welcome__content pd-4\">\n            <div className=\"content__inner\">\n              <h2 className=\"mg-b-2\">Get started</h2>\n              <form action=\"\">\n                <fieldset className=\"mg-b-2\">\n                  <input className=\"mg-b-2\" type=\"text\" placeholder=\"Your name\" value={username} ref={this.inputRef} onChange={this.handleNameChange} />\n                  <input type=\"text\" placeholder=\"Room name\" value={title} onChange={this.handleRoomChange} />\n                  <input type=\"text\" placeholder=\"Playback URL\" value={playbackURL} onChange={this.handlePlaybackURLChange} />\n                  <button className=\"mg-t-2 btn btn--primary\" disabled={createRoomDisabled} onClick={this.handleCreateRoom} >Create room</button>\n                </fieldset>\n              </form>\n            </div>\n          </div>\n\n        </div>\n        {this.state.showError && (\n          <Error\n            closeError={this.closeError}\n            errorMsg={this.state.errorMsg}\n          />\n        )}\n      </React.Fragment>\n    )\n  }\n}\n\nexport default withRouter(Welcome);\n"]},"metadata":{},"sourceType":"module"}