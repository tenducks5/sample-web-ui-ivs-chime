{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{withRouter}from'react-router-dom';import*as config from'../../config';import Error from'./Error';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Welcome=/*#__PURE__*/function(_Component){_inherits(Welcome,_Component);var _super=_createSuper(Welcome);function Welcome(){var _this;_classCallCheck(this,Welcome);_this=_super.call(this);_this.state={role:'host',username:'',title:'',playbackURL:config.DEFAULT_VIDEO_STREAM,errorMsg:'',showError:false};_this.handleNameChange=function(e){_this.setState({username:e.target.value});};_this.handleRoomChange=function(e){_this.setState({title:e.target.value});};_this.handlePlaybackURLChange=function(e){_this.setState({playbackURL:e.target.value});};_this.handleCreateRoom=function(e){e.preventDefault();e.stopPropagation();_this.createRoom();};_this.setErrorMsg=function(errorMsg){_this.setState({errorMsg:errorMsg,showError:true});};_this.closeError=function(){_this.setState({showError:false});};_this.baseHref=config.BASE_HREF;_this.inputRef=/*#__PURE__*/React.createRef();return _this;}_createClass(Welcome,[{key:\"componentDidMount\",value:function componentDidMount(){var qs=new URLSearchParams(this.props.location.search);var action=qs.get('action');if(action==='join'){var title=qs.get('room');this.props.history.push(\"\".concat(this.baseHref,\"/join?room=\").concat(title));}this.inputRef.current.focus();}},{key:\"createRoom\",value:function(){var _createRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state,title,username,playbackURL,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state=this.state,title=_this$state.title,username=_this$state.username,playbackURL=_this$state.playbackURL;data={username:username,title:title,playbackURL:playbackURL,role:this.state.role};sessionStorage.setItem(\"chime[\".concat(title,\"]\"),JSON.stringify(data));this.props.history.push(\"\".concat(this.baseHref,\"/meeting?room=\").concat(title));case 4:case\"end\":return _context.stop();}}},_callee,this);}));function createRoom(){return _createRoom.apply(this,arguments);}return createRoom;}()},{key:\"render\",value:function render(){var _this$state2=this.state,username=_this$state2.username,title=_this$state2.title,playbackURL=_this$state2.playbackURL;var createRoomDisabled=!username||!title||!playbackURL;return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"welcome form-grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"welcome__intro\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"intro__inner formatted-text\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Amazon IVS with ChimeSDK\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Create or join rooms, and watch Amazon IVS streams with anyone.\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"welcome__content pd-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content__inner\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mg-b-2\",children:\"Get started\"}),/*#__PURE__*/_jsx(\"form\",{action:\"\",children:/*#__PURE__*/_jsxs(\"fieldset\",{className:\"mg-b-2\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"mg-b-2\",type:\"text\",placeholder:\"Your name\",value:username,ref:this.inputRef,onChange:this.handleNameChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Room name\",value:title,onChange:this.handleRoomChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Playback URL\",value:playbackURL,onChange:this.handlePlaybackURLChange}),/*#__PURE__*/_jsx(\"button\",{className:\"mg-t-2 btn btn--primary\",disabled:createRoomDisabled,onClick:this.handleCreateRoom,children:\"Create room\"})]})})]})})]}),this.state.showError&&/*#__PURE__*/_jsx(Error,{closeError:this.closeError,errorMsg:this.state.errorMsg})]});}}]);return Welcome;}(Component);export default withRouter(Welcome);","map":{"version":3,"sources":["/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/src/components/chimeWeb/Welcome.jsx"],"names":["React","Component","withRouter","config","Error","Welcome","state","role","username","title","playbackURL","DEFAULT_VIDEO_STREAM","errorMsg","showError","handleNameChange","e","setState","target","value","handleRoomChange","handlePlaybackURLChange","handleCreateRoom","preventDefault","stopPropagation","createRoom","setErrorMsg","closeError","baseHref","BASE_HREF","inputRef","createRef","qs","URLSearchParams","props","location","search","action","get","history","push","current","focus","data","sessionStorage","setItem","JSON","stringify","createRoomDisabled"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport * as config from '../../config';\nimport Error from './Error';\n\nclass Welcome extends Component {\n\n  state = {\n    role: 'host',\n    username: '',\n    title: '',\n    playbackURL: config.DEFAULT_VIDEO_STREAM,\n    errorMsg: '',\n    showError: false\n  }\n\n  constructor() {\n    super ();\n    this.baseHref = config.BASE_HREF;\n    this.inputRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const qs = new URLSearchParams(this.props.location.search);\n    const action = qs.get('action');\n    if (action === 'join') {\n      const title = qs.get('room');\n      this.props.history.push(`${this.baseHref}/join?room=${title}`);\n    }\n    this.inputRef.current.focus();\n  }\n\n  handleNameChange = e => {\n    this.setState({ username: e.target.value })\n  }\n\n  handleRoomChange = e => {\n    this.setState({ title: e.target.value })\n  }\n\n  handlePlaybackURLChange = e => {\n    this.setState({ playbackURL: e.target.value })\n  }\n\n  handleCreateRoom = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.createRoom();\n  }\n\n  setErrorMsg = errorMsg => {\n    this.setState({ errorMsg, showError: true });\n  }\n\n  closeError = () => {\n    this.setState({ showError: false });\n  }\n\n  async createRoom() {\n    const { title, username, playbackURL } = this.state;\n    const data = {\n      username,\n      title,\n      playbackURL,\n      role: this.state.role\n    }\n    sessionStorage.setItem(`chime[${title}]`, JSON.stringify(data));\n    this.props.history.push(`${this.baseHref}/meeting?room=${title}`);\n  }\n\n  render() {\n    const { username, title, playbackURL } = this.state;\n    const createRoomDisabled = !username || !title || !playbackURL;\n    return (\n      <React.Fragment>\n        <div className=\"welcome form-grid\">\n\n          <div className=\"welcome__intro\">\n            <div className=\"intro__inner formatted-text\">\n              <h1>Amazon IVS with ChimeSDK</h1>\n              <h3>Create or join rooms, and watch Amazon IVS streams with anyone.</h3>\n            </div>\n          </div>\n\n          <div className=\"welcome__content pd-4\">\n            <div className=\"content__inner\">\n              <h2 className=\"mg-b-2\">Get started</h2>\n              <form action=\"\">\n                <fieldset className=\"mg-b-2\">\n                  <input className=\"mg-b-2\" type=\"text\" placeholder=\"Your name\" value={username} ref={this.inputRef} onChange={this.handleNameChange} />\n                  <input type=\"text\" placeholder=\"Room name\" value={title} onChange={this.handleRoomChange} />\n                  <input type=\"text\" placeholder=\"Playback URL\" value={playbackURL} onChange={this.handlePlaybackURLChange} />\n                  <button className=\"mg-t-2 btn btn--primary\" disabled={createRoomDisabled} onClick={this.handleCreateRoom} >Create room</button>\n                </fieldset>\n              </form>\n            </div>\n          </div>\n\n        </div>\n        {this.state.showError && (\n          <Error\n            closeError={this.closeError}\n            errorMsg={this.state.errorMsg}\n          />\n        )}\n      </React.Fragment>\n    )\n  }\n}\n\nexport default withRouter(Welcome);\n"]},"metadata":{},"sourceType":"module"}