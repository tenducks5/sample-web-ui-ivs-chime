{"ast":null,"code":"var _jsxFileName = \"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/src/components/chimeWeb/Join.jsx\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport * as config from '../../config';\nimport Error from './Error';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Join extends Component {\n  constructor() {\n    super();\n    this.state = {\n      role: 'attendee',\n      username: '',\n      title: '',\n      errorMsg: '',\n      showError: false\n    };\n\n    this.joinRoom = async () => {\n      const {\n        username,\n        title\n      } = this.state;\n      const data = {\n        username,\n        title,\n        role: this.state.role\n      };\n      sessionStorage.setItem(`chime[${title}]`, JSON.stringify(data));\n      this.props.history.push(`${this.baseHref}/meeting?room=${title}`);\n    };\n\n    this.handleNameChange = e => {\n      this.setState({\n        username: e.target.value\n      });\n    };\n\n    this.handleJoinRoom = e => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.joinRoom();\n    };\n\n    this.handleClick = e => {\n      let node = e.target;\n      let isModal = false;\n\n      while (node) {\n        if (node && node.classList && node.classList.contains('notice--error')) {\n          isModal = true;\n          break;\n        }\n\n        node = node.parentNode;\n      }\n\n      if (!isModal) {\n        this.closeError();\n      }\n    };\n\n    this.setErrorMsg = errorMsg => {\n      this.setState({\n        errorMsg,\n        showError: true\n      });\n    };\n\n    this.closeError = () => {\n      this.setState({\n        showError: false\n      });\n    };\n\n    this.inputRef = /*#__PURE__*/React.createRef();\n    this.baseHref = config.BASE_HREF;\n  }\n\n  componentDidMount() {\n    const qs = new URLSearchParams(this.props.location.search);\n    const room = qs.get('room');\n    this.setState({\n      title: room\n    });\n  }\n\n  render() {\n    const {\n      username\n    } = this.state;\n    const joinRoomDisabled = !username;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"welcome form-grid\",\n      onClick: this.handleClick,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"welcome__intro\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"intro__inner formatted-text\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Amazon IVS with ChimeSDK\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Create or join rooms, and watch Amazon IVS streams with anyone.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"welcome__content pd-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content__inner\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"mg-b-2\",\n            children: \"Hey there!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            action: \"\",\n            children: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n              className: \"mg-b-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Your name\",\n                value: username,\n                ref: this.inputRef,\n                onChange: this.handleNameChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"mg-t-1 btn btn--primary\",\n                disabled: joinRoomDisabled,\n                onClick: this.handleJoinRoom,\n                children: \"Join room\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), this.state.showError && /*#__PURE__*/_jsxDEV(Error, {\n        closeError: this.closeError,\n        errorMsg: this.state.errorMsg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(Join);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/src/components/chimeWeb/Join.jsx"],"names":["React","Component","withRouter","config","Error","Join","constructor","state","role","username","title","errorMsg","showError","joinRoom","data","sessionStorage","setItem","JSON","stringify","props","history","push","baseHref","handleNameChange","e","setState","target","value","handleJoinRoom","preventDefault","stopPropagation","handleClick","node","isModal","classList","contains","parentNode","closeError","setErrorMsg","inputRef","createRef","BASE_HREF","componentDidMount","qs","URLSearchParams","location","search","room","get","render","joinRoomDisabled"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport * as config from '../../config';\nimport Error from './Error';\n\nclass Join extends Component {\n\n  state = {\n    role: 'attendee',\n    username: '',\n    title: '',\n    errorMsg: '',\n    showError: false\n  }\n\n  constructor() {\n    super ();\n    this.inputRef = React.createRef();\n    this.baseHref = config.BASE_HREF;\n  }\n\n  componentDidMount() {\n    const qs = new URLSearchParams(this.props.location.search);\n    const room = qs.get('room');\n    this.setState({ title: room });\n  }\n\n  joinRoom = async () => {\n    const { username, title } = this.state;\n    const data = {\n      username,\n      title,\n      role: this.state.role\n    }\n    sessionStorage.setItem(`chime[${title}]`, JSON.stringify(data));\n    this.props.history.push(`${this.baseHref}/meeting?room=${title}`);\n  }\n\n  handleNameChange = e => {\n    this.setState({ username: e.target.value })\n  }\n\n  handleJoinRoom = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.joinRoom();\n  }\n\n  handleClick = (e) => {\n    let node = e.target;\n    let isModal = false;\n    while (node) {\n      if (node && node.classList && node.classList.contains('notice--error')) {\n        isModal = true;\n        break;\n      }\n      node = node.parentNode;\n    }\n    if (!isModal) {\n      this.closeError();\n    }\n  }\n\n  setErrorMsg = errorMsg => {\n    this.setState({ errorMsg, showError: true });\n  }\n\n  closeError = () => {\n    this.setState({ showError: false });\n  }\n\n  render() {\n    const { username } = this.state;\n    const joinRoomDisabled = !username;\n    return (\n      <div className=\"welcome form-grid\" onClick={this.handleClick}>\n\n        <div className=\"welcome__intro\">\n          <div className=\"intro__inner formatted-text\">\n            <h1>Amazon IVS with ChimeSDK</h1>\n            <h3>Create or join rooms, and watch Amazon IVS streams with anyone.</h3>\n          </div>\n        </div>\n\n        <div className=\"welcome__content pd-4\">\n          <div className=\"content__inner\">\n            <h2 className=\"mg-b-2\">Hey there!</h2>\n            <form action=\"\">\n              <fieldset className=\"mg-b-2\">\n                <input type=\"text\" placeholder=\"Your name\" value={username} ref={this.inputRef} onChange={this.handleNameChange} />\n                <button className=\"mg-t-1 btn btn--primary\" disabled={joinRoomDisabled} onClick={this.handleJoinRoom}>Join room</button>\n              </fieldset>\n            </form>\n          </div>\n        </div>\n\n        {this.state.showError && (\n          <Error\n            closeError={this.closeError}\n            errorMsg={this.state.errorMsg}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport default withRouter(Join);\n"]},"metadata":{},"sourceType":"module"}