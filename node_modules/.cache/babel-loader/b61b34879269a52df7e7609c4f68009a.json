{"ast":null,"code":"\"use strict\"; // Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar DragAndZoomPresentationPolicy_1 = require(\"../presentation/policy/DragAndZoomPresentationPolicy\");\n\nvar ScaleToFitPresentationPolicy_1 = require(\"../presentation/policy/ScaleToFitPresentationPolicy\");\n\nvar DefaultScreenViewing =\n/** @class */\nfunction () {\n  function DefaultScreenViewing(componentContext) {\n    this.componentContext = componentContext;\n  }\n  /**\n   * Opens the screen signaling connection\n   * @param request\n   */\n\n\n  DefaultScreenViewing.prototype.open = function (request) {\n    var _this = this;\n\n    this.request = request;\n    return this.componentContext.jpegDecoderController.init().then(function () {\n      return _this.componentContext.signalingSession.open(request);\n    }).then(function () {});\n  };\n  /**\n   * Stops screen viewing and closes the screen signaling connection\n   */\n\n\n  DefaultScreenViewing.prototype.close = function () {\n    var _this = this;\n\n    return this.stop().catch(function () {}).finally(function () {\n      return _this.componentContext.signalingSession.close();\n    });\n  };\n  /**\n   * Initializes the viewport and opens the screen viewing data connection\n   * @param canvasContainer\n   */\n\n\n  DefaultScreenViewing.prototype.start = function (canvasContainer) {\n    this.componentContext.viewer.start(canvasContainer);\n    return this.componentContext.viewingSession.openConnection(this.request).then(function () {});\n  };\n  /**\n   * Tears down the viewport and closes the screen viewing data connection\n   */\n\n\n  DefaultScreenViewing.prototype.stop = function () {\n    this.componentContext.viewer.stop();\n    return this.componentContext.viewingSession.closeConnection();\n  };\n\n  DefaultScreenViewing.prototype.presentScaleToFit = function () {\n    this.componentContext.deltaRenderer.changePresentationPolicy(new ScaleToFitPresentationPolicy_1.default());\n  };\n\n  DefaultScreenViewing.prototype.presentDragAndZoom = function () {\n    this.componentContext.deltaRenderer.changePresentationPolicy(new DragAndZoomPresentationPolicy_1.default());\n  };\n\n  DefaultScreenViewing.prototype.zoomIn = function (relativeZoomFactor) {\n    this.componentContext.deltaRenderer.zoomRelative(relativeZoomFactor || 1.25);\n  };\n\n  DefaultScreenViewing.prototype.zoomOut = function (relativeZoomFactor) {\n    this.componentContext.deltaRenderer.zoomRelative(relativeZoomFactor || 0.8);\n  };\n\n  DefaultScreenViewing.prototype.zoom = function (absoluteZoomFactor) {\n    this.componentContext.deltaRenderer.zoomAbsolute(absoluteZoomFactor);\n  };\n\n  DefaultScreenViewing.prototype.zoomReset = function () {\n    this.componentContext.deltaRenderer.zoomReset();\n  };\n\n  DefaultScreenViewing.prototype.registerObserver = function (observer) {\n    this.componentContext.signalingSession.registerObserver(observer);\n  };\n\n  DefaultScreenViewing.prototype.unregisterObserver = function (observer) {\n    this.componentContext.signalingSession.unregisterObserver(observer);\n  };\n\n  return DefaultScreenViewing;\n}();\n\nexports.default = DefaultScreenViewing;","map":{"version":3,"sources":["../../src/screenviewing/DefaultScreenViewing.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\n// Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DragAndZoomPresentationPolicy_1 = require(\"../presentation/policy/DragAndZoomPresentationPolicy\");\nvar ScaleToFitPresentationPolicy_1 = require(\"../presentation/policy/ScaleToFitPresentationPolicy\");\nvar DefaultScreenViewing = /** @class */ (function () {\n    function DefaultScreenViewing(componentContext) {\n        this.componentContext = componentContext;\n    }\n    /**\n     * Opens the screen signaling connection\n     * @param request\n     */\n    DefaultScreenViewing.prototype.open = function (request) {\n        var _this = this;\n        this.request = request;\n        return this.componentContext.jpegDecoderController\n            .init()\n            .then(function () { return _this.componentContext.signalingSession.open(request); })\n            .then(function () { });\n    };\n    /**\n     * Stops screen viewing and closes the screen signaling connection\n     */\n    DefaultScreenViewing.prototype.close = function () {\n        var _this = this;\n        return this.stop()\n            .catch(function () { })\n            .finally(function () {\n            return _this.componentContext.signalingSession.close();\n        });\n    };\n    /**\n     * Initializes the viewport and opens the screen viewing data connection\n     * @param canvasContainer\n     */\n    DefaultScreenViewing.prototype.start = function (canvasContainer) {\n        this.componentContext.viewer.start(canvasContainer);\n        return this.componentContext.viewingSession.openConnection(this.request).then(function () { });\n    };\n    /**\n     * Tears down the viewport and closes the screen viewing data connection\n     */\n    DefaultScreenViewing.prototype.stop = function () {\n        this.componentContext.viewer.stop();\n        return this.componentContext.viewingSession.closeConnection();\n    };\n    DefaultScreenViewing.prototype.presentScaleToFit = function () {\n        this.componentContext.deltaRenderer.changePresentationPolicy(new ScaleToFitPresentationPolicy_1.default());\n    };\n    DefaultScreenViewing.prototype.presentDragAndZoom = function () {\n        this.componentContext.deltaRenderer.changePresentationPolicy(new DragAndZoomPresentationPolicy_1.default());\n    };\n    DefaultScreenViewing.prototype.zoomIn = function (relativeZoomFactor) {\n        this.componentContext.deltaRenderer.zoomRelative(relativeZoomFactor || 1.25);\n    };\n    DefaultScreenViewing.prototype.zoomOut = function (relativeZoomFactor) {\n        this.componentContext.deltaRenderer.zoomRelative(relativeZoomFactor || 0.8);\n    };\n    DefaultScreenViewing.prototype.zoom = function (absoluteZoomFactor) {\n        this.componentContext.deltaRenderer.zoomAbsolute(absoluteZoomFactor);\n    };\n    DefaultScreenViewing.prototype.zoomReset = function () {\n        this.componentContext.deltaRenderer.zoomReset();\n    };\n    DefaultScreenViewing.prototype.registerObserver = function (observer) {\n        this.componentContext.signalingSession.registerObserver(observer);\n    };\n    DefaultScreenViewing.prototype.unregisterObserver = function (observer) {\n        this.componentContext.signalingSession.unregisterObserver(observer);\n    };\n    return DefaultScreenViewing;\n}());\nexports.default = DefaultScreenViewing;\n//# sourceMappingURL=DefaultScreenViewing.js.map"]},"metadata":{},"sourceType":"script"}