{"ast":null,"code":"\"use strict\"; // Copyright 2019-2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar DefaultVideoStreamIdSet_1 = require(\"../videostreamidset/DefaultVideoStreamIdSet\");\n/**\n * [[AllHighestVideoBandwidthPolicy]] implements is a rudimentary policy that simply\n * always subscribes to the highest quality video stream available\n * for all non-self participants.\n */\n\n\nvar AllHighestVideoBandwidthPolicy =\n/** @class */\nfunction () {\n  function AllHighestVideoBandwidthPolicy(selfAttendeeId) {\n    this.selfAttendeeId = selfAttendeeId;\n    this.reset();\n  }\n\n  AllHighestVideoBandwidthPolicy.prototype.reset = function () {\n    this.optimalReceiveSet = new DefaultVideoStreamIdSet_1.default();\n    this.subscribedReceiveSet = new DefaultVideoStreamIdSet_1.default();\n  };\n\n  AllHighestVideoBandwidthPolicy.prototype.updateIndex = function (videoIndex) {\n    this.optimalReceiveSet = this.calculateOptimalReceiveSet(videoIndex);\n  };\n\n  AllHighestVideoBandwidthPolicy.prototype.updateMetrics = function (_clientMetricReport) {};\n\n  AllHighestVideoBandwidthPolicy.prototype.wantsResubscribe = function () {\n    return !this.subscribedReceiveSet.equal(this.optimalReceiveSet);\n  };\n\n  AllHighestVideoBandwidthPolicy.prototype.chooseSubscriptions = function () {\n    this.subscribedReceiveSet = this.optimalReceiveSet.clone();\n    return this.subscribedReceiveSet.clone();\n  };\n\n  AllHighestVideoBandwidthPolicy.prototype.calculateOptimalReceiveSet = function (videoIndex) {\n    return videoIndex.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId);\n  };\n\n  return AllHighestVideoBandwidthPolicy;\n}();\n\nexports.default = AllHighestVideoBandwidthPolicy;","map":{"version":3,"sources":["../../src/videodownlinkbandwidthpolicy/AllHighestVideoBandwidthPolicy.ts"],"names":[],"mappings":"cAAA;AACA;;;;;;AAGA,IAAA,yBAAA,GAAA,OAAA,CAAA,6CAAA,CAAA;AAKA;;;;AAIG;;;AACH,IAAA,8BAAA;AAAA;AAAA,YAAA;AAIE,WAAA,8BAAA,CAAoB,cAApB,EAA0C;AAAtB,SAAA,cAAA,GAAA,cAAA;AAClB,SAAK,KAAL;AACD;;AAED,EAAA,8BAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACE,SAAK,iBAAL,GAAyB,IAAI,yBAAA,CAAA,OAAJ,EAAzB;AACA,SAAK,oBAAL,GAA4B,IAAI,yBAAA,CAAA,OAAJ,EAA5B;AACD,GAHD;;AAKA,EAAA,8BAAA,CAAA,SAAA,CAAA,WAAA,GAAA,UAAY,UAAZ,EAAwC;AACtC,SAAK,iBAAL,GAAyB,KAAK,0BAAL,CAAgC,UAAhC,CAAzB;AACD,GAFD;;AAIA,EAAA,8BAAA,CAAA,SAAA,CAAA,aAAA,GAAA,UAAc,mBAAd,EAAqD,CAAU,CAA/D;;AAEA,EAAA,8BAAA,CAAA,SAAA,CAAA,gBAAA,GAAA,YAAA;AACE,WAAO,CAAC,KAAK,oBAAL,CAA0B,KAA1B,CAAgC,KAAK,iBAArC,CAAR;AACD,GAFD;;AAIA,EAAA,8BAAA,CAAA,SAAA,CAAA,mBAAA,GAAA,YAAA;AACE,SAAK,oBAAL,GAA4B,KAAK,iBAAL,CAAuB,KAAvB,EAA5B;AACA,WAAO,KAAK,oBAAL,CAA0B,KAA1B,EAAP;AACD,GAHD;;AAKQ,EAAA,8BAAA,CAAA,SAAA,CAAA,0BAAA,GAAR,UAAmC,UAAnC,EAA+D;AAC7D,WAAO,UAAU,CAAC,8CAAX,CAA0D,KAAK,cAA/D,CAAP;AACD,GAFO;;AAGV,SAAA,8BAAA;AAAC,CA/BD,EAAA","sourceRoot":"","sourcesContent":["\"use strict\";\n// Copyright 2019-2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DefaultVideoStreamIdSet_1 = require(\"../videostreamidset/DefaultVideoStreamIdSet\");\n/**\n * [[AllHighestVideoBandwidthPolicy]] implements is a rudimentary policy that simply\n * always subscribes to the highest quality video stream available\n * for all non-self participants.\n */\nvar AllHighestVideoBandwidthPolicy = /** @class */ (function () {\n    function AllHighestVideoBandwidthPolicy(selfAttendeeId) {\n        this.selfAttendeeId = selfAttendeeId;\n        this.reset();\n    }\n    AllHighestVideoBandwidthPolicy.prototype.reset = function () {\n        this.optimalReceiveSet = new DefaultVideoStreamIdSet_1.default();\n        this.subscribedReceiveSet = new DefaultVideoStreamIdSet_1.default();\n    };\n    AllHighestVideoBandwidthPolicy.prototype.updateIndex = function (videoIndex) {\n        this.optimalReceiveSet = this.calculateOptimalReceiveSet(videoIndex);\n    };\n    AllHighestVideoBandwidthPolicy.prototype.updateMetrics = function (_clientMetricReport) { };\n    AllHighestVideoBandwidthPolicy.prototype.wantsResubscribe = function () {\n        return !this.subscribedReceiveSet.equal(this.optimalReceiveSet);\n    };\n    AllHighestVideoBandwidthPolicy.prototype.chooseSubscriptions = function () {\n        this.subscribedReceiveSet = this.optimalReceiveSet.clone();\n        return this.subscribedReceiveSet.clone();\n    };\n    AllHighestVideoBandwidthPolicy.prototype.calculateOptimalReceiveSet = function (videoIndex) {\n        return videoIndex.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId);\n    };\n    return AllHighestVideoBandwidthPolicy;\n}());\nexports.default = AllHighestVideoBandwidthPolicy;\n//# sourceMappingURL=AllHighestVideoBandwidthPolicy.js.map"]},"metadata":{},"sourceType":"script"}