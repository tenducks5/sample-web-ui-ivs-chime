{"ast":null,"code":"import _classCallCheck from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LocalVideo=/*#__PURE__*/function(_Component){_inherits(LocalVideo,_Component);var _super=_createSuper(LocalVideo);function LocalVideo(){var _this;_classCallCheck(this,LocalVideo);_this=_super.call(this);_this.state={enabled:false,muted:false,showMeta:true};_this.rosterCallback=function(newRoster){var attendeeId;for(attendeeId in newRoster){// Exclude others\nif(attendeeId!==_this.props.joinInfo.Attendee.AttendeeId){continue;}_this.setState({muted:newRoster[attendeeId].muted});}};_this.videoElement=/*#__PURE__*/React.createRef();return _this;}_createClass(LocalVideo,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Hide meta info after 2 seconds\nsetTimeout(function(){_this2.setState({showMeta:false});},2500);this.props.chime.audioVideo.addObserver({videoTileDidUpdate:function videoTileDidUpdate(tileState){if(!tileState.boundAttendeeId||!tileState.localTile||!tileState.tileId||!_this2.videoElement.current){return;}_this2.props.chime.audioVideo.bindVideoElement(tileState.tileId,_this2.videoElement.current);_this2.setState({enabled:tileState.active});}});this.props.chime.subscribeToRosterUpdate(this.rosterCallback);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.props.chime.unsubscribeFromRosterUpdate(this.rosterCallback);}},{key:\"handleMouseEnter\",value:function handleMouseEnter(e){this.setState({showMeta:true});}},{key:\"handleMouseLeave\",value:function handleMouseLeave(e){this.setState({showMeta:false});}},{key:\"render\",value:function render(){// always show metadata when muted\nvar showMeta=this.state.showMeta||this.state.muted||!this.state.enabled;var micMuteCls=this.state.muted?'controls__btn--mic_on':'controls__btn--mic_off';var metaCls=showMeta?'':' cam__meta--hide';return/*#__PURE__*/_jsxs(\"div\",{className:\"cam\",onMouseEnter:this.handleMouseEnter.bind(this),onMouseLeave:this.handleMouseLeave.bind(this),children:[/*#__PURE__*/_jsx(\"div\",{className:\"cam__preview\",children:/*#__PURE__*/_jsx(\"div\",{className:\"video-container pos-relative\",children:/*#__PURE__*/_jsx(\"video\",{className:\"attendee_cam\",ref:this.videoElement})})}),/*#__PURE__*/_jsxs(\"span\",{className:\"cam__meta\".concat(metaCls),id:\"\".concat(this.props.joinInfo.Attendee.AttendeeId),children:[\"You\",/*#__PURE__*/_jsxs(\"span\",{className:\"\".concat(micMuteCls,\" btn--mic\"),\"data-id\":this.props.joinInfo.Attendee.AttendeeId,children:[/*#__PURE__*/_jsx(\"svg\",{className:\"attendee mg-l-1 btn__svg btn__svg--sm btn__svg--mic_on\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 14C13.66 14 14.99 12.66 14.99 11L15 5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V11C9 12.66 10.34 14 12 14ZM17.3 11C17.3 14 14.76 16.1 12 16.1C9.24 16.1 6.7 14 6.7 11H5C5 14.41 7.72 17.23 11 17.72V21H13V17.72C16.28 17.24 19 14.42 19 11H17.3Z\",fill:\"white\"})}),/*#__PURE__*/_jsx(\"svg\",{className:\"attendee mg-l-1 btn__svg btn__svg--sm btn__svg--mic_off\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M19 11H17.3C17.3 11.74 17.14 12.43 16.87 13.05L18.1 14.28C18.66 13.3 19 12.19 19 11ZM14.98 11.17C14.98 11.11 15 11.06 15 11V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V5.18L14.98 11.17ZM4.27 3L3 4.27L9.01 10.28V11C9.01 12.66 10.34 14 12 14C12.22 14 12.44 13.97 12.65 13.92L14.31 15.58C13.6 15.91 12.81 16.1 12 16.1C9.24 16.1 6.7 14 6.7 11H5C5 14.41 7.72 17.23 11 17.72V21H13V17.72C13.91 17.59 14.77 17.27 15.54 16.82L19.73 21L21 19.73L4.27 3Z\",fill:\"white\"})})]})]})]});}}]);return LocalVideo;}(Component);export default LocalVideo;","map":{"version":3,"sources":["/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/src/components/chimeWeb/LocalVideo.jsx"],"names":["React","Component","LocalVideo","state","enabled","muted","showMeta","rosterCallback","newRoster","attendeeId","props","joinInfo","Attendee","AttendeeId","setState","videoElement","createRef","setTimeout","chime","audioVideo","addObserver","videoTileDidUpdate","tileState","boundAttendeeId","localTile","tileId","current","bindVideoElement","active","subscribeToRosterUpdate","unsubscribeFromRosterUpdate","e","micMuteCls","metaCls","handleMouseEnter","bind","handleMouseLeave"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass LocalVideo extends Component {\n\n  state = {\n    enabled: false,\n    muted: false,\n    showMeta: true\n  }\n\n  constructor() {\n    super();\n    this.videoElement = React.createRef();\n  }\n\n  rosterCallback = (newRoster) => {\n\n    let attendeeId;\n    for (attendeeId in newRoster) {\n\n      // Exclude others\n      if (attendeeId !== this.props.joinInfo.Attendee.AttendeeId) {\n        continue;\n      }\n\n      this.setState({ muted: newRoster[attendeeId].muted });\n    }\n  };\n\n  componentDidMount() {\n    // Hide meta info after 2 seconds\n    setTimeout(() => {\n      this.setState({\n        showMeta: false\n      });\n    }, 2500);\n\n    this.props.chime.audioVideo.addObserver({\n      videoTileDidUpdate: (tileState) => {\n        if (\n          !tileState.boundAttendeeId ||\n          !tileState.localTile ||\n          !tileState.tileId ||\n          !this.videoElement.current\n        ) {\n          return;\n        }\n        this.props.chime.audioVideo.bindVideoElement(\n          tileState.tileId,\n          this.videoElement.current\n        );\n        this.setState({\n          enabled: tileState.active\n        });\n      }\n    });\n\n    this.props.chime.subscribeToRosterUpdate(this.rosterCallback);\n  }\n\n  componentWillUnmount() {\n    this.props.chime.unsubscribeFromRosterUpdate(this.rosterCallback);\n  }\n\n  handleMouseEnter(e) {\n    this.setState({\n      showMeta: true\n    });\n  }\n\n  handleMouseLeave(e) {\n    this.setState({\n      showMeta: false\n    });\n  }\n\n  render() {\n    // always show metadata when muted\n    const showMeta = this.state.showMeta || this.state.muted || !this.state.enabled;\n\n    const micMuteCls = this.state.muted ? 'controls__btn--mic_on' : 'controls__btn--mic_off';\n    const metaCls = showMeta ? '' : ' cam__meta--hide';\n    return (\n      <div className=\"cam\" onMouseEnter={this.handleMouseEnter.bind(this)} onMouseLeave={this.handleMouseLeave.bind(this)}>\n        <div className=\"cam__preview\">\n          <div className=\"video-container pos-relative\">\n            <video className=\"attendee_cam\" ref={this.videoElement} />\n          </div>\n        </div>\n        <span className={`cam__meta${metaCls}`} id={`${this.props.joinInfo.Attendee.AttendeeId}`}>\n          You\n          <span className={`${micMuteCls} btn--mic`} data-id={this.props.joinInfo.Attendee.AttendeeId}>\n            <svg className=\"attendee mg-l-1 btn__svg btn__svg--sm btn__svg--mic_on\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M12 14C13.66 14 14.99 12.66 14.99 11L15 5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V11C9 12.66 10.34 14 12 14ZM17.3 11C17.3 14 14.76 16.1 12 16.1C9.24 16.1 6.7 14 6.7 11H5C5 14.41 7.72 17.23 11 17.72V21H13V17.72C16.28 17.24 19 14.42 19 11H17.3Z\" fill=\"white\"/></svg>\n            <svg className=\"attendee mg-l-1 btn__svg btn__svg--sm btn__svg--mic_off\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M19 11H17.3C17.3 11.74 17.14 12.43 16.87 13.05L18.1 14.28C18.66 13.3 19 12.19 19 11ZM14.98 11.17C14.98 11.11 15 11.06 15 11V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V5.18L14.98 11.17ZM4.27 3L3 4.27L9.01 10.28V11C9.01 12.66 10.34 14 12 14C12.22 14 12.44 13.97 12.65 13.92L14.31 15.58C13.6 15.91 12.81 16.1 12 16.1C9.24 16.1 6.7 14 6.7 11H5C5 14.41 7.72 17.23 11 17.72V21H13V17.72C13.91 17.59 14.77 17.27 15.54 16.82L19.73 21L21 19.73L4.27 3Z\" fill=\"white\"/></svg>\n          </span>\n        </span>\n      </div>\n    )\n  }\n}\n\nLocalVideo.propTypes = {\n  chime: PropTypes.object,\n  joinInfo: PropTypes.object\n};\n\nexport default LocalVideo;\n"]},"metadata":{},"sourceType":"module"}