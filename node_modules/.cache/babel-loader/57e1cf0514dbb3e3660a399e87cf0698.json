{"ast":null,"code":"var _jsxFileName = \"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/src/components/chimeWeb/LocalVideo.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass LocalVideo extends Component {\n  constructor() {\n    super();\n    this.state = {\n      enabled: false,\n      muted: false,\n      showMeta: true\n    };\n\n    this.rosterCallback = newRoster => {\n      let attendeeId;\n\n      for (attendeeId in newRoster) {\n        // Exclude others\n        if (attendeeId !== this.props.joinInfo.Attendee.AttendeeId) {\n          continue;\n        }\n\n        this.setState({\n          muted: newRoster[attendeeId].muted\n        });\n      }\n    };\n\n    this.videoElement = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidMount() {\n    // Hide meta info after 2 seconds\n    setTimeout(() => {\n      this.setState({\n        showMeta: false\n      });\n    }, 2500);\n    this.props.chime.audioVideo.addObserver({\n      videoTileDidUpdate: tileState => {\n        if (!tileState.boundAttendeeId || !tileState.localTile || !tileState.tileId || !this.videoElement.current) {\n          return;\n        }\n\n        this.props.chime.audioVideo.bindVideoElement(tileState.tileId, this.videoElement.current);\n        this.setState({\n          enabled: tileState.active\n        });\n      }\n    });\n    this.props.chime.subscribeToRosterUpdate(this.rosterCallback);\n  }\n\n  componentWillUnmount() {\n    this.props.chime.unsubscribeFromRosterUpdate(this.rosterCallback);\n  }\n\n  handleMouseEnter(e) {\n    this.setState({\n      showMeta: true\n    });\n  }\n\n  handleMouseLeave(e) {\n    this.setState({\n      showMeta: false\n    });\n  }\n\n  render() {\n    // always show metadata when muted\n    const showMeta = this.state.showMeta || this.state.muted || !this.state.enabled;\n    const micMuteCls = this.state.muted ? 'controls__btn--mic_on' : 'controls__btn--mic_off';\n    const metaCls = showMeta ? '' : ' cam__meta--hide';\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cam\",\n      onMouseEnter: this.handleMouseEnter.bind(this),\n      onMouseLeave: this.handleMouseLeave.bind(this),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cam__preview\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-container pos-relative\",\n          children: /*#__PURE__*/_jsxDEV(\"video\", {\n            className: \"attendee_cam\",\n            ref: this.videoElement\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `cam__meta${metaCls}`,\n        id: `${this.props.joinInfo.Attendee.AttendeeId}`,\n        children: [\"You\", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `${micMuteCls} btn--mic`,\n          \"data-id\": this.props.joinInfo.Attendee.AttendeeId,\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"attendee mg-l-1 btn__svg btn__svg--sm btn__svg--mic_on\",\n            width: \"24\",\n            height: \"24\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M12 14C13.66 14 14.99 12.66 14.99 11L15 5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V11C9 12.66 10.34 14 12 14ZM17.3 11C17.3 14 14.76 16.1 12 16.1C9.24 16.1 6.7 14 6.7 11H5C5 14.41 7.72 17.23 11 17.72V21H13V17.72C16.28 17.24 19 14.42 19 11H17.3Z\",\n              fill: \"white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 175\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"attendee mg-l-1 btn__svg btn__svg--sm btn__svg--mic_off\",\n            width: \"24\",\n            height: \"24\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M19 11H17.3C17.3 11.74 17.14 12.43 16.87 13.05L18.1 14.28C18.66 13.3 19 12.19 19 11ZM14.98 11.17C14.98 11.11 15 11.06 15 11V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V5.18L14.98 11.17ZM4.27 3L3 4.27L9.01 10.28V11C9.01 12.66 10.34 14 12 14C12.22 14 12.44 13.97 12.65 13.92L14.31 15.58C13.6 15.91 12.81 16.1 12 16.1C9.24 16.1 6.7 14 6.7 11H5C5 14.41 7.72 17.23 11 17.72V21H13V17.72C13.91 17.59 14.77 17.27 15.54 16.82L19.73 21L21 19.73L4.27 3Z\",\n              fill: \"white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 176\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nLocalVideo.propTypes = {\n  chime: PropTypes.object,\n  joinInfo: PropTypes.object\n};\nexport default LocalVideo;","map":{"version":3,"sources":["/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/src/components/chimeWeb/LocalVideo.jsx"],"names":["React","Component","PropTypes","LocalVideo","constructor","state","enabled","muted","showMeta","rosterCallback","newRoster","attendeeId","props","joinInfo","Attendee","AttendeeId","setState","videoElement","createRef","componentDidMount","setTimeout","chime","audioVideo","addObserver","videoTileDidUpdate","tileState","boundAttendeeId","localTile","tileId","current","bindVideoElement","active","subscribeToRosterUpdate","componentWillUnmount","unsubscribeFromRosterUpdate","handleMouseEnter","e","handleMouseLeave","render","micMuteCls","metaCls","bind","propTypes","object"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass LocalVideo extends Component {\n\n  state = {\n    enabled: false,\n    muted: false,\n    showMeta: true\n  }\n\n  constructor() {\n    super();\n    this.videoElement = React.createRef();\n  }\n\n  rosterCallback = (newRoster) => {\n\n    let attendeeId;\n    for (attendeeId in newRoster) {\n\n      // Exclude others\n      if (attendeeId !== this.props.joinInfo.Attendee.AttendeeId) {\n        continue;\n      }\n\n      this.setState({ muted: newRoster[attendeeId].muted });\n    }\n  };\n\n  componentDidMount() {\n    // Hide meta info after 2 seconds\n    setTimeout(() => {\n      this.setState({\n        showMeta: false\n      });\n    }, 2500);\n\n    this.props.chime.audioVideo.addObserver({\n      videoTileDidUpdate: (tileState) => {\n        if (\n          !tileState.boundAttendeeId ||\n          !tileState.localTile ||\n          !tileState.tileId ||\n          !this.videoElement.current\n        ) {\n          return;\n        }\n        this.props.chime.audioVideo.bindVideoElement(\n          tileState.tileId,\n          this.videoElement.current\n        );\n        this.setState({\n          enabled: tileState.active\n        });\n      }\n    });\n\n    this.props.chime.subscribeToRosterUpdate(this.rosterCallback);\n  }\n\n  componentWillUnmount() {\n    this.props.chime.unsubscribeFromRosterUpdate(this.rosterCallback);\n  }\n\n  handleMouseEnter(e) {\n    this.setState({\n      showMeta: true\n    });\n  }\n\n  handleMouseLeave(e) {\n    this.setState({\n      showMeta: false\n    });\n  }\n\n  render() {\n    // always show metadata when muted\n    const showMeta = this.state.showMeta || this.state.muted || !this.state.enabled;\n\n    const micMuteCls = this.state.muted ? 'controls__btn--mic_on' : 'controls__btn--mic_off';\n    const metaCls = showMeta ? '' : ' cam__meta--hide';\n    return (\n      <div className=\"cam\" onMouseEnter={this.handleMouseEnter.bind(this)} onMouseLeave={this.handleMouseLeave.bind(this)}>\n        <div className=\"cam__preview\">\n          <div className=\"video-container pos-relative\">\n            <video className=\"attendee_cam\" ref={this.videoElement} />\n          </div>\n        </div>\n        <span className={`cam__meta${metaCls}`} id={`${this.props.joinInfo.Attendee.AttendeeId}`}>\n          You\n          <span className={`${micMuteCls} btn--mic`} data-id={this.props.joinInfo.Attendee.AttendeeId}>\n            <svg className=\"attendee mg-l-1 btn__svg btn__svg--sm btn__svg--mic_on\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M12 14C13.66 14 14.99 12.66 14.99 11L15 5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V11C9 12.66 10.34 14 12 14ZM17.3 11C17.3 14 14.76 16.1 12 16.1C9.24 16.1 6.7 14 6.7 11H5C5 14.41 7.72 17.23 11 17.72V21H13V17.72C16.28 17.24 19 14.42 19 11H17.3Z\" fill=\"white\"/></svg>\n            <svg className=\"attendee mg-l-1 btn__svg btn__svg--sm btn__svg--mic_off\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M19 11H17.3C17.3 11.74 17.14 12.43 16.87 13.05L18.1 14.28C18.66 13.3 19 12.19 19 11ZM14.98 11.17C14.98 11.11 15 11.06 15 11V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V5.18L14.98 11.17ZM4.27 3L3 4.27L9.01 10.28V11C9.01 12.66 10.34 14 12 14C12.22 14 12.44 13.97 12.65 13.92L14.31 15.58C13.6 15.91 12.81 16.1 12 16.1C9.24 16.1 6.7 14 6.7 11H5C5 14.41 7.72 17.23 11 17.72V21H13V17.72C13.91 17.59 14.77 17.27 15.54 16.82L19.73 21L21 19.73L4.27 3Z\" fill=\"white\"/></svg>\n          </span>\n        </span>\n      </div>\n    )\n  }\n}\n\nLocalVideo.propTypes = {\n  chime: PropTypes.object,\n  joinInfo: PropTypes.object\n};\n\nexport default LocalVideo;\n"]},"metadata":{},"sourceType":"module"}