{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{withRouter}from'react-router-dom';import*as config from'../../config';import Error from'./Error';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Join=/*#__PURE__*/function(_Component){_inherits(Join,_Component);var _super=_createSuper(Join);function Join(){var _this;_classCallCheck(this,Join);_this=_super.call(this);_this.state={role:'attendee',username:'',title:'',errorMsg:'',showError:false};_this.joinRoom=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state,username,title,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state=_this.state,username=_this$state.username,title=_this$state.title;data={username:username,title:title,role:_this.state.role};sessionStorage.setItem(\"chime[\".concat(title,\"]\"),JSON.stringify(data));_this.props.history.push(\"\".concat(_this.baseHref,\"/meeting?room=\").concat(title));case 4:case\"end\":return _context.stop();}}},_callee);}));_this.handleNameChange=function(e){_this.setState({username:e.target.value});};_this.handleJoinRoom=function(e){e.preventDefault();e.stopPropagation();_this.joinRoom();};_this.handleClick=function(e){var node=e.target;var isModal=false;while(node){if(node&&node.classList&&node.classList.contains('notice--error')){isModal=true;break;}node=node.parentNode;}if(!isModal){_this.closeError();}};_this.setErrorMsg=function(errorMsg){_this.setState({errorMsg:errorMsg,showError:true});};_this.closeError=function(){_this.setState({showError:false});};_this.inputRef=/*#__PURE__*/React.createRef();_this.baseHref=config.BASE_HREF;return _this;}_createClass(Join,[{key:\"componentDidMount\",value:function componentDidMount(){var qs=new URLSearchParams(this.props.location.search);var room=qs.get('room');this.setState({title:room});}},{key:\"render\",value:function render(){var username=this.state.username;var joinRoomDisabled=!username;return/*#__PURE__*/_jsxs(\"div\",{className:\"welcome form-grid\",onClick:this.handleClick,children:[/*#__PURE__*/_jsx(\"div\",{className:\"welcome__intro\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"intro__inner formatted-text\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Amazon IVS with ChimeSDK\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Create or join rooms, and watch Amazon IVS streams with anyone.\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"welcome__content pd-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content__inner\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mg-b-2\",children:\"Hey there!\"}),/*#__PURE__*/_jsx(\"form\",{action:\"\",children:/*#__PURE__*/_jsxs(\"fieldset\",{className:\"mg-b-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Your name\",value:username,ref:this.inputRef,onChange:this.handleNameChange}),/*#__PURE__*/_jsx(\"button\",{className:\"mg-t-1 btn btn--primary\",disabled:joinRoomDisabled,onClick:this.handleJoinRoom,children:\"Join room\"})]})})]})}),this.state.showError&&/*#__PURE__*/_jsx(Error,{closeError:this.closeError,errorMsg:this.state.errorMsg})]});}}]);return Join;}(Component);export default withRouter(Join);","map":{"version":3,"sources":["/Users/sykang/Documents/Git/amazon-ivs-chime-web-demo/web-ui/src/components/chimeWeb/Join.jsx"],"names":["React","Component","withRouter","config","Error","Join","state","role","username","title","errorMsg","showError","joinRoom","data","sessionStorage","setItem","JSON","stringify","props","history","push","baseHref","handleNameChange","e","setState","target","value","handleJoinRoom","preventDefault","stopPropagation","handleClick","node","isModal","classList","contains","parentNode","closeError","setErrorMsg","inputRef","createRef","BASE_HREF","qs","URLSearchParams","location","search","room","get","joinRoomDisabled"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport * as config from '../../config';\nimport Error from './Error';\n\nclass Join extends Component {\n\n  state = {\n    role: 'attendee',\n    username: '',\n    title: '',\n    errorMsg: '',\n    showError: false\n  }\n\n  constructor() {\n    super ();\n    this.inputRef = React.createRef();\n    this.baseHref = config.BASE_HREF;\n  }\n\n  componentDidMount() {\n    const qs = new URLSearchParams(this.props.location.search);\n    const room = qs.get('room');\n    this.setState({ title: room });\n  }\n\n  joinRoom = async () => {\n    const { username, title } = this.state;\n    const data = {\n      username,\n      title,\n      role: this.state.role\n    }\n    sessionStorage.setItem(`chime[${title}]`, JSON.stringify(data));\n    this.props.history.push(`${this.baseHref}/meeting?room=${title}`);\n  }\n\n  handleNameChange = e => {\n    this.setState({ username: e.target.value })\n  }\n\n  handleJoinRoom = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.joinRoom();\n  }\n\n  handleClick = (e) => {\n    let node = e.target;\n    let isModal = false;\n    while (node) {\n      if (node && node.classList && node.classList.contains('notice--error')) {\n        isModal = true;\n        break;\n      }\n      node = node.parentNode;\n    }\n    if (!isModal) {\n      this.closeError();\n    }\n  }\n\n  setErrorMsg = errorMsg => {\n    this.setState({ errorMsg, showError: true });\n  }\n\n  closeError = () => {\n    this.setState({ showError: false });\n  }\n\n  render() {\n    const { username } = this.state;\n    const joinRoomDisabled = !username;\n    return (\n      <div className=\"welcome form-grid\" onClick={this.handleClick}>\n\n        <div className=\"welcome__intro\">\n          <div className=\"intro__inner formatted-text\">\n            <h1>Amazon IVS with ChimeSDK</h1>\n            <h3>Create or join rooms, and watch Amazon IVS streams with anyone.</h3>\n          </div>\n        </div>\n\n        <div className=\"welcome__content pd-4\">\n          <div className=\"content__inner\">\n            <h2 className=\"mg-b-2\">Hey there!</h2>\n            <form action=\"\">\n              <fieldset className=\"mg-b-2\">\n                <input type=\"text\" placeholder=\"Your name\" value={username} ref={this.inputRef} onChange={this.handleNameChange} />\n                <button className=\"mg-t-1 btn btn--primary\" disabled={joinRoomDisabled} onClick={this.handleJoinRoom}>Join room</button>\n              </fieldset>\n            </form>\n          </div>\n        </div>\n\n        {this.state.showError && (\n          <Error\n            closeError={this.closeError}\n            errorMsg={this.state.errorMsg}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport default withRouter(Join);\n"]},"metadata":{},"sourceType":"module"}