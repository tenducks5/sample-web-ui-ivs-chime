{"ast":null,"code":"\"use strict\"; // Copyright 2019-2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar FullJitterBackoffFactory_1 = require(\"../backoff/FullJitterBackoffFactory\");\n\nvar DefaultDOMWebSocketFactory_1 = require(\"../domwebsocket/DefaultDOMWebSocketFactory\");\n\nvar DefaultDragObserver_1 = require(\"../dragobserver/DefaultDragObserver\");\n\nvar Maybe_1 = require(\"../maybe/Maybe\");\n\nvar DefaultPromisedWebSocketFactory_1 = require(\"../promisedwebsocket/DefaultPromisedWebSocketFactory\");\n\nvar ReconnectingPromisedWebSocketFactory_1 = require(\"../promisedwebsocket/ReconnectingPromisedWebSocketFactory\");\n\nvar ResizeObserverAdapterFactory_1 = require(\"../resizeobserveradapter/ResizeObserverAdapterFactory\");\n\nvar ScreenSignalingSessionContainer_1 = require(\"../screensignalingsession/ScreenSignalingSessionContainer\");\n\nvar DefaultScreenViewingComponentContext_1 = require(\"../screenviewing/context/DefaultScreenViewingComponentContext\");\n\nvar DefaultScreenViewing_1 = require(\"../screenviewing/DefaultScreenViewing\");\n\nvar ScreenViewingSessionConnectionRequest_1 = require(\"../screenviewing/session/ScreenViewingSessionConnectionRequest\");\n\nvar DefaultScreenShareViewFacade =\n/** @class */\nfunction () {\n  function DefaultScreenShareViewFacade(configuration, logger) {\n    this.configuration = configuration;\n    this.logger = logger;\n\n    this.dragObserverFactory = function (window, callback, element) {\n      return new DefaultDragObserver_1.default(window, element, callback);\n    };\n\n    var reconnectingWSFactory = new ReconnectingPromisedWebSocketFactory_1.default(new DefaultPromisedWebSocketFactory_1.default(new DefaultDOMWebSocketFactory_1.default()), new FullJitterBackoffFactory_1.default(1000, 100, 300), Maybe_1.default.of(configuration.screenSharingSessionOptions.reconnectRetryLimit).getOrElse(5));\n    this.screenViewing = new DefaultScreenViewing_1.default(new DefaultScreenViewingComponentContext_1.default(new ResizeObserverAdapterFactory_1.default(), this.dragObserverFactory, reconnectingWSFactory, new ScreenSignalingSessionContainer_1.default(reconnectingWSFactory, logger).screenSignalingSessionFactory(), this.logger, {}, window));\n  }\n\n  DefaultScreenShareViewFacade.prototype.open = function () {\n    var connectionRequest = new ScreenViewingSessionConnectionRequest_1.default(this.configuration.urls.screenViewingURL, this.configuration.urls.screenDataURL, this.configuration.credentials.joinToken, this.configuration.screenViewingTimeoutMs);\n    return this.screenViewing.open(connectionRequest);\n  };\n\n  DefaultScreenShareViewFacade.prototype.close = function () {\n    return this.screenViewing.close();\n  };\n\n  DefaultScreenShareViewFacade.prototype.start = function (element) {\n    this.logger.warn('ScreenShareViewFacade has been deprecated and will be removed ' + 'beginning with version 2.0.0. Instead use the ' + 'startContentShareFromScreenCapture() and stopContentShare() methods ' + 'on the AudioVideoFacade.');\n    return this.screenViewing.start(element);\n  };\n\n  DefaultScreenShareViewFacade.prototype.stop = function () {\n    return this.screenViewing.stop();\n  };\n\n  DefaultScreenShareViewFacade.prototype.presentScaleToFit = function () {\n    this.screenViewing.presentScaleToFit();\n  };\n\n  DefaultScreenShareViewFacade.prototype.presentDragAndZoom = function () {\n    this.screenViewing.presentDragAndZoom();\n  };\n\n  DefaultScreenShareViewFacade.prototype.zoomIn = function (relativeZoomFactor) {\n    this.screenViewing.zoomIn(relativeZoomFactor);\n  };\n\n  DefaultScreenShareViewFacade.prototype.zoomOut = function (relativeZoomFactor) {\n    this.screenViewing.zoomOut(relativeZoomFactor);\n  };\n\n  DefaultScreenShareViewFacade.prototype.zoom = function (absoluteZoomFactor) {\n    this.screenViewing.zoom(absoluteZoomFactor);\n  };\n\n  DefaultScreenShareViewFacade.prototype.zoomReset = function () {\n    this.screenViewing.zoomReset();\n  };\n\n  DefaultScreenShareViewFacade.prototype.registerObserver = function (observer) {\n    this.screenViewing.registerObserver(observer);\n  };\n\n  DefaultScreenShareViewFacade.prototype.unregisterObserver = function (observer) {\n    this.screenViewing.unregisterObserver(observer);\n  };\n\n  return DefaultScreenShareViewFacade;\n}();\n\nexports.default = DefaultScreenShareViewFacade;","map":{"version":3,"sources":["../../src/screenshareviewfacade/DefaultScreenShareViewFacade.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\n// Copyright 2019-2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar FullJitterBackoffFactory_1 = require(\"../backoff/FullJitterBackoffFactory\");\nvar DefaultDOMWebSocketFactory_1 = require(\"../domwebsocket/DefaultDOMWebSocketFactory\");\nvar DefaultDragObserver_1 = require(\"../dragobserver/DefaultDragObserver\");\nvar Maybe_1 = require(\"../maybe/Maybe\");\nvar DefaultPromisedWebSocketFactory_1 = require(\"../promisedwebsocket/DefaultPromisedWebSocketFactory\");\nvar ReconnectingPromisedWebSocketFactory_1 = require(\"../promisedwebsocket/ReconnectingPromisedWebSocketFactory\");\nvar ResizeObserverAdapterFactory_1 = require(\"../resizeobserveradapter/ResizeObserverAdapterFactory\");\nvar ScreenSignalingSessionContainer_1 = require(\"../screensignalingsession/ScreenSignalingSessionContainer\");\nvar DefaultScreenViewingComponentContext_1 = require(\"../screenviewing/context/DefaultScreenViewingComponentContext\");\nvar DefaultScreenViewing_1 = require(\"../screenviewing/DefaultScreenViewing\");\nvar ScreenViewingSessionConnectionRequest_1 = require(\"../screenviewing/session/ScreenViewingSessionConnectionRequest\");\nvar DefaultScreenShareViewFacade = /** @class */ (function () {\n    function DefaultScreenShareViewFacade(configuration, logger) {\n        this.configuration = configuration;\n        this.logger = logger;\n        this.dragObserverFactory = function (window, callback, element) { return new DefaultDragObserver_1.default(window, element, callback); };\n        var reconnectingWSFactory = new ReconnectingPromisedWebSocketFactory_1.default(new DefaultPromisedWebSocketFactory_1.default(new DefaultDOMWebSocketFactory_1.default()), new FullJitterBackoffFactory_1.default(1000, 100, 300), Maybe_1.default.of(configuration.screenSharingSessionOptions.reconnectRetryLimit).getOrElse(5));\n        this.screenViewing = new DefaultScreenViewing_1.default(new DefaultScreenViewingComponentContext_1.default(new ResizeObserverAdapterFactory_1.default(), this.dragObserverFactory, reconnectingWSFactory, new ScreenSignalingSessionContainer_1.default(reconnectingWSFactory, logger).screenSignalingSessionFactory(), this.logger, {}, window));\n    }\n    DefaultScreenShareViewFacade.prototype.open = function () {\n        var connectionRequest = new ScreenViewingSessionConnectionRequest_1.default(this.configuration.urls.screenViewingURL, this.configuration.urls.screenDataURL, this.configuration.credentials.joinToken, this.configuration.screenViewingTimeoutMs);\n        return this.screenViewing.open(connectionRequest);\n    };\n    DefaultScreenShareViewFacade.prototype.close = function () {\n        return this.screenViewing.close();\n    };\n    DefaultScreenShareViewFacade.prototype.start = function (element) {\n        this.logger.warn('ScreenShareViewFacade has been deprecated and will be removed ' +\n            'beginning with version 2.0.0. Instead use the ' +\n            'startContentShareFromScreenCapture() and stopContentShare() methods ' +\n            'on the AudioVideoFacade.');\n        return this.screenViewing.start(element);\n    };\n    DefaultScreenShareViewFacade.prototype.stop = function () {\n        return this.screenViewing.stop();\n    };\n    DefaultScreenShareViewFacade.prototype.presentScaleToFit = function () {\n        this.screenViewing.presentScaleToFit();\n    };\n    DefaultScreenShareViewFacade.prototype.presentDragAndZoom = function () {\n        this.screenViewing.presentDragAndZoom();\n    };\n    DefaultScreenShareViewFacade.prototype.zoomIn = function (relativeZoomFactor) {\n        this.screenViewing.zoomIn(relativeZoomFactor);\n    };\n    DefaultScreenShareViewFacade.prototype.zoomOut = function (relativeZoomFactor) {\n        this.screenViewing.zoomOut(relativeZoomFactor);\n    };\n    DefaultScreenShareViewFacade.prototype.zoom = function (absoluteZoomFactor) {\n        this.screenViewing.zoom(absoluteZoomFactor);\n    };\n    DefaultScreenShareViewFacade.prototype.zoomReset = function () {\n        this.screenViewing.zoomReset();\n    };\n    DefaultScreenShareViewFacade.prototype.registerObserver = function (observer) {\n        this.screenViewing.registerObserver(observer);\n    };\n    DefaultScreenShareViewFacade.prototype.unregisterObserver = function (observer) {\n        this.screenViewing.unregisterObserver(observer);\n    };\n    return DefaultScreenShareViewFacade;\n}());\nexports.default = DefaultScreenShareViewFacade;\n//# sourceMappingURL=DefaultScreenShareViewFacade.js.map"]},"metadata":{},"sourceType":"script"}